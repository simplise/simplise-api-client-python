---
applyTo: "tests/**/*.py"
---

# Test Coding Instructions

テストコードを記述する際に従うべきガイドライン。

## フォーマットと静的解析

フォーマッタ兼リンターは Ruff を使用する。設定は `pyproject.toml` に従うこと。

## テストコード生成の進め方

1. **テストの目的を明確にする**:
    - どの機能やメソッドをテストするのかを明確にし、必要なテストケースを洗い出す。
2. **テストフレームワークの使用**:
    - `pytest` を使用してテストコードを記述すること。
    - まず初めに最小限のテストケースを作成し、徐々に追加していくこと。
3. **テストの構造**:
    - 各テストは独立して実行可能であること。
    - テストは明確な名前を付け、何をテストしているのかが一目でわかるようにすること。
4. **モックとスタブの使用**:
    - 外部依存関係や時間のかかる処理はモックやスタブを使用してテストの実行速度を向上させること。
5. **アサーションの使用**:
   - `assert` 文を使用して期待される結果と実際の結果を比較すること。
   - 可能な限り具体的なアサーションを使用し、失敗した場合に何が問題だったのかを明確にすること。
6. **テストの実行**:
   - `pytest` を使用してテストを実行し、全てのテストが成功することを確認すること。
   - テストの実行は定期的に行い、コードの変更が既存の機能に影響を与えないことを確認すること。
7. **ドキュメンテーション**:
   - 各テストケースには簡単なコメントを追加し、何をテストしているのかを説明すること。
   - テストコード自体も、読みやすく保守しやすいように適切にコメントを追加すること。